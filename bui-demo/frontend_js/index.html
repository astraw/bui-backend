<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>BUI - Rust Backend, JS Frontend - Demo</title>
  </head>
  <body>
    <div id="root">
      <div>
        <h3>BUI - Rust Backend, JS Frontend - Demo</h3>
          <p>
            <button id="toggle-recording-button">Toggle Recording</button>
          </p>
          <p>
              <div id="name-input-div">
                <label>Name
                  <input type="text" id="name-input">
                </label>
              </div>
          </p>
          <p>
            <h4>backend state</h4>
            <div>
              <div id="mirror"></div>
            </div>
          </p>
      </div>
    </div>
    <script src="js/main.js"></script>
    <script type='text/javascript'>
      // In the case where a token is required for access, a cookie is set and
      // the need for the token is removed. We then also remove the token from
      // the URL.
      function _remove_token_from_url() {
        if (window.location.search.length <= 1) {
          return;
        }
        var search_parameters = window.location.search.slice(1).split('&');
        for (var i = 0; i < search_parameters.length; i++) {
          if (search_parameters[i].split('=')[0] === 'token') {
            // remote token from search parameters
            search_parameters.splice(i, 1);
            var new_search = '';
            if (search_parameters.length) {
              new_search = '?' + search_parameters.join('&');
            }
            var new_url = window.location.origin +
                          window.location.pathname +
                          new_search +
                          window.location.hash;
            window.history.replaceState({}, "", new_url);
            return;
          }
        }
      }
      _remove_token_from_url();
  </script>
  </body>
</html>